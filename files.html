<link rel="stylesheet" href="css/left-panel.css" media="all">
<link rel="stylesheet" href="css/buttons-and-menus.css" media="all">
<link rel="stylesheet" href="css/up-panel.css" media="all">
<link rel="stylesheet" href="css/right-click-menu.css" media="all">

<body style="background: #fcfcfc">
  <div style="display: none;" id="right-click-menu" class="right-click-menu">
    <div class="menu-option" onclick="alert('Option 0 selected')">ğŸ–¼ï¸ edit pic</div>
  </div>
  <div id="loading"
    style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.5); display: none; justify-content: center; align-items: center; z-index: 900;">
    <span style="font-size: 10.2em; color: white;">â³</span>
    <div id="timer" style="font-size: 2em; color: white;">0</div>
  </div>

  

  <div class="left-top-panel">
    <button disabled class="b-1" id="last-action-time"
      style="color: black;z-index:1; position: absolute;top: 50%;left: 50%; transform: translate(-50%, -50%);">0.7</button>
  </div>

  <div class="left-side-panel">

    <div id="nav-buttons">
      <a href="https://webdev983.github.io/templatesv3/summary"><button class="b-1">ğŸ§ </button></a>
      <a href="https://webdev983.github.io/templatesv3/files"><button class="b-1 b-selected">ğŸ“‚</button></a>
    </div>


    
    <div class="local-buttons" style="margin-top: 30px;">
      <button class="b-1" onclick="createNew()">â•</button>
      <button class="b-1" title="select few files" hidden>ğŸ”²</button>
      <div id="filters" hidden>
        <button title="publish status" id="filters-open" class="b-1">ğŸª„</button>
        <button id='btn-all' class='b-1' onclick="fileTypeFilter('all')" hidden>ğŸ§±</button>
        <button id='btn-page' class='b-1' onclick="fileTypeFilter('page')" hidden>ğŸŒ</button>
        <button id='btn-component' class='b-1' onclick="fileTypeFilter('component')" hidden>ğŸ§©</button>
        <button id='btn-css' class='b-1' onclick="fileTypeFilter('css')" hidden>ğŸ¨</button>
        <button id='btn-js' class='b-1' onclick="fileTypeFilter('js')" hidden>ğŸ’»</button>
        <button id="publish" hidden class="b-1">ğŸ“°</button>
        <button id="sitemap" hidden class="b-1">ğŸ“‹</button>
        <button id="robots" hidden class="b-1">ğŸ“µ</button>
        <button id="dates" hidden class="b-1" title="select few files">ğŸ“…</button>
      </div>
    </div>
  </div>

  <div class="bottom-buttons">
    <button class="b-1">ğŸ“´</button>
  </div>


  <div id="main-content" style="margin-left:80px; margin-top: -60" class="main-content">

    <select hidden id="pathSelector" style="margin-top: 10px; min-width: 200px;" onchange="handlePathSelection()">
      <option value="path0">â¬‡ï¸ select</option>
      <option value="path1">â¬…ï¸back</option>
      <option value="path99">ğŸ  home</option>

    </select>

    <div class="up-panel">
      <button id="path_select" onclick="loadRoot()" class='b-1' title="change mode"
        style="user-select: none; margin-left: 30px;">ğŸ‘£</button><label class="l-2"
        style="cursor: pointer; color:#4A90E2;" onclick="labelClick(event)"></label>

    </div>







    <fieldset hidden  class="menu"  data-element="action-message">
      <legend>
          <button 
          onclick="cancel(event)"
          class="b-6">
          âŒ</button></legend>
          <span 
                data-element="action-message-value" 
                class="l-4" style="user-select: none;">
              âœ… Enabled Protection</span>

        </fieldset>    
  
    </fieldset>


    <fieldset hidden class="menu"   data-element="create-new-file-path">
      <legend><button data-action="create-new-file-path-cancel" onclick="cancel(event)"
          class="b-5">âŒ</button></legend>
      <span class="l-3">ğŸ“‚ </span>
      <input type="text" placeholder="path" data-input="create-new-file-path-input"
        oninput="adjustWidthToContent(this)" 
        style="
        min-width: 500px;
        padding: 5px;
        border: 1px solid #4A90E2; /* Green border */
        border-radius: 5px; /* Rounded corners */
        font-size: 16px; /* Larger font size for better readability */
      "  
        >
      <button data-action="create-new-file-path-save" onclick="loader(event,savePath)"
      class="b-4">ğŸ’¾ Save</button>
    </fieldset>
    <fieldset  class="menu"  data-element="choose-new-file-type" hidden>
      <legend><button onclick="cancel(event)" style="font-size: 0.9em;">âŒ</button></legend>
      <button data-action="choose-new-file-type-html" style="font-size: 1.2em;" onclick="createNew('HTML')">ğŸ§© HTML
        component</button>
      <button data-action="choose-new-file-type-css" style="font-size: 1.2em;" onclick="createNew('CSS')">ğŸ¨ CSS
        stylesfile</button>
      <button data-action="choose-new-file-type-js" style="font-size: 1.2em;"
        onclick="createNew('JavaScript')">ğŸ’»JavaScript</button>

    </fieldset>


    <ol data-element="file-path-list" id="filePathList" class="list-1" style="margin-left: -10px;">



    </ol>
    <select id="amount-of-rows"
      style="margin-top: 10px; min-width: 50px; position: absolute; right: 10px; font-size:20px;">
      <option value="path0">25</option>
      <option value="path1">50</option>
      <option value="path2">100</option>
      <option value="path3">150</option>
      <option value="path3">200</option>
    </select>


    </main>

  </div>
  <div hidden>
    <!-- file info-->



    <fieldset class="menu"  data-element="file-id">
      <legend><button  clas="b-6" onclick="cancel(event)">âŒ</button></legend>
      <span class="l-4" style="user-select: none;">ğŸ†”</span><span data-value="file-id"
        class="l-4">1414124-414221412-4124214124-412412</span></fieldset>    <!-- remove file menu-->
    <fieldset  class="menu"  hidden id="cancelation">
      <legend><button onclick="cancel(event)" class="l-6" >âŒ</button></legend>

      <span class="l-4">are you sure want to remove this file?</span>
      <div>
        <button class="b-3" data-action="remove-file-confirmation">âœ… DELETE</button>
      </div>
    </fieldset>
    <!-- file path-->
    <li data-element="file-path" id="item">

      <label hidden class="l-3" style="margin-right: 3px;" id="Pushpin">ğŸ“Œ</label><button hidden
        class="b-4">â˜‘ï¸</button><label data-value="file-path"
        class="l-3">universal/blablabla/blablabla/coolcss</label><label data-value="file-emoji"
        style="user-select: none; margin-left: 5px;" class="l-3"> ğŸ§©</label>


    </li>

    <fieldset class="menu"  hidden data-element="copy-folder">
      <legend><button data-action="copy-file-path-cancel" class="b-5">âŒ</button></legend>
      <span class="l-3">ğŸ“‚ </span>
      <input data-input="copy-file-path-input" type="text" placeholder="name" 
      style="
      min-width: 500px;
      padding: 5px;
      border: 1px solid #4A90E2; /* Green border */
      border-radius: 5px; /* Rounded corners */
      font-size: 16px; /* Larger font size for better readability */
    "
        >
      <button class="b-4" data-action="copy-file-path-save">âœ… Copy </button>

      <label class="l-3">
        <input type="radio" checked name="choose_components">
         AllğŸ“
      </label>
      <label class="l-3">
        <input type="radio"  name="choose_components">
         HubğŸ—ºï¸
      </label>
      <label class="l-3">
        <input type="radio" name="choose_components">
         StyleğŸ¨
      </label>
      <label class="l-3">
        <input type="checkbox">
         ReplaceğŸ”„
      </label>
    </fieldset>



  </div>
  <script>
    function generateUUID() {
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        const r = Math.random() * 16 | 0,
          v = c === 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
      });
    }
    function addMenu(e, id, protected) {
      e.preventDefault(); // Prevent the default context menu from opening
      console.log('in11');
      const menu = document.querySelector('#right-click-menu'); // Use # for ID selector
      menu.innerHTML = '';

      function addMenuEntry(menu, text, clickHandler) {
        const entry = document.createElement('div');
        entry.className = 'menu-option';
        entry.innerHTML = text;
        entry.onclick = clickHandler;
        menu.appendChild(entry);
      }
      const copy = async (id) => {
        console.log(id)
        const response = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?id=${id}&startsWith=true`, {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
          },
        });

        // Ensure the request was successful (status code 2xx)
        if (!response.ok) {
          throw new Error(`Failed to load data from the database. Status: ${response.status}`);
        }

        // Parse and log the response or handle it as needed
        const responseData = await response.json();
        const newId = generateUUID()
        console.log(JSON.stringify(responseData))
        for (const entry of responseData.items) {
          entry.id = newId
          console.log('entry ' + JSON.stringify(entry))
          if (entry.sk === 'path') {
            entry.lsi1 = entry.lsi1.replace(';publish:published','') + '-copy-' + newId
            entry.protected = false
          }
          if (entry.target_element === id + '-tree') {
            console.log('err1')
            entry.target_element = newId + '-tree'
          }
          const response1 = await fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(entry),
          });
          if (!response1.ok) {
            throw new Error(`Failed to load data from the database. Status: ${response.status}`);
          }
        }
        console.log(newId)
        location.reload()
      }
      const edit = (id) => {
        const editArea = document.querySelector('[data-element="create-new-file-path"]');
        const fieldset = document.getElementById(id);

        if (editArea && fieldset) {
          console.log('editing')
          const cloned = editArea.cloneNode(true);
          const saveButton = cloned.querySelector('[data-action="create-new-file-path-save"]');
          const cancelButton = cloned.querySelector('[data-action="create-new-file-path-cancel"]');
          cancelButton.onclick = (e) => {
            e.stopPropagation()
            e.target.parentNode.parentNode.remove()
          }
          const input = cloned.querySelector('[data-input="create-new-file-path-input"]');
          const name = fieldset.querySelector('[data-value="file-path"]').textContent;

          input.value = path + name;
          input.onclick = (event) => {
            event.stopPropagation()
          }
          saveButton.onclick = async function (e) {
            e.stopPropagation()
            const new_value = cloned.querySelector('[data-input="create-new-file-path-input"]').value
            const res1 = await fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2/' + id + ':path', {
              method: 'GET',
              headers: {
                'Content-Type': 'application/json',
              }
            }).then(re => re.json())


            await fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(
                {
                  ...res1,
                  lsi1: new_value, id
                }
              ),
            })
            loadUsingPath()
            cloned.remove();
          };

          cloned.style.display = 'block';
          fieldset.insertAdjacentElement('afterend', cloned);
        }
      };
      const openRemove1 = (id) => {

        var fieldset = document.getElementById(id);

        // Get the file ID element within the fieldset


        // Toggle the visibility of the "cancelation" fieldset
        var cancelationFieldset = document.querySelector('#cancelation');
        const cloned = cancelationFieldset.cloneNode(true)
        cloned.removeAttribute('hidden');
        // Toggle the visibility of the "cancelation" fieldset

        cloned.querySelector('[data-action="remove-file-confirmation"]').onclick = function (event) {
          event.stopPropagation()
          remove(event, id);
        };
        fieldset.insertAdjacentElement('afterend', cloned);












      }
      function showId1(id) {
        console.log('event' + JSON.stringify(event.target.target))
        // Get the parent fieldset of the clicked button
        var fieldset = document.getElementById(id);

        // Get the file ID element within the fieldset
        var fileIdElement = document.querySelector('[data-element="file-id"]');
        const cloned = fileIdElement.cloneNode(true)
        cloned.querySelector('[data-value="file-id"]').textContent = id
        cloned.removeAttribute('hidden')


        // Toggle the visibility of the file ID element
        fieldset.insertAdjacentElement('afterend', cloned);
      }
      addMenuEntry(menu, 'â„¹ï¸ Info', (e) => showId1(id))
      addMenuEntry(menu, 'âœï¸ Edit', (e) => edit(id))
      addMenuEntry(menu, 'ğŸ—‘ï¸ Delete', (e) => openRemove1(id))
      addMenuEntry(menu, 'â§‰ Copy', (e) => copy(id))
      if (protected) {
        addMenuEntry(menu, 'âŒ Disable Protection', (e) => setProtected(id, false))
      }
      else {
        addMenuEntry(menu, 'âœ… Enable Protection', (e) => setProtected(id, true))
      }

      const setProtected = async (id, protected) => {
        const response = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?id=${id}&sk=path&startsWith=true`, {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
          },
        }).then(response => response.json());
        await fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ ...response.items[0], protected }),
        });
        loadUsingPath()
        alert('protection set ' + protected)
      }
      // Adjust the position relative to the viewport
      const offsetX = e.pageX;
      const offsetY = e.pageY;

      menu.style.display = 'block';
      menu.style.left = `${offsetX}px`;
      menu.style.top = `${offsetY}px`;

      // Hide the menu when clicking the left mouse button
      window.addEventListener('click', function () {
        menu.style.display = 'none';
      });

    }
    function addDirectoryMenu(e, path, id) {
      e.preventDefault(); // Prevent the default context menu from opening
      console.log('in11');
      const menu = document.querySelector('#right-click-menu'); // Use # for ID selector
      menu.innerHTML = '';

      function addMenuEntry(menu, text, clickHandler) {
        const entry = document.createElement('div');
        entry.className = 'menu-option';
        entry.innerHTML = text;
        entry.onclick = clickHandler;
        menu.appendChild(entry);
      }
      const openRemove1 = (id, path) => {
        var fieldset = document.getElementById(id);

        // Get the file ID element within the fieldset


        // Toggle the visibility of the "cancelation" fieldset
        var cancelationFieldset = document.querySelector('#cancelation');
        const cloned = cancelationFieldset.cloneNode(true)
        cloned.removeAttribute('hidden');
        cloned.querySelector('[data-action="remove-file-confirmation"]').onclick = function (event) {
          event.stopPropagation()
          removeDirectory(event, id, path);
        };
        fieldset.insertAdjacentElement('afterend', cloned);


      }
      const copy = async (id) => {
        const editArea = document.querySelector('[data-element="copy-folder"]');
        const fieldset = document.getElementById(id);

        if (editArea && fieldset) {
          console.log('editing')
          const cloned = editArea.cloneNode(true);
          const saveButton = cloned.querySelector('[data-action="copy-file-path-save"]');
          const cancelButton = cloned.querySelector('[data-action="copy-file-path-cancel"]');
          cancelButton.onclick = (e) => {
            e.stopPropagation()
            e.target.parentNode.parentNode.remove()
          }
          const input = cloned.querySelector('[data-input="copy-file-path-input"]');
          const name = fieldset.querySelector('[data-value="file-path"]').textContent;

          input.value = path;
          input.onclick = (event) => {
            event.stopPropagation()
          }
          saveButton.onclick = async function (e) {
            e.stopPropagation()
            const new_value = cloned.querySelector('[data-input="copy-file-path-input"]').value
            const response = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?ownerUUID=path&gsi1lsi1=true&lsi1=${path}`);
            //list of sub paths
            const data = await response.json();

            await Promise.all(data.items.map(async item => {
              const newId = generateUUID()

              const response = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?id=${item.id}&startsWith=true`, {
                method: 'GET',
                headers: {
                  'Content-Type': 'application/json',
                },
              });
              const res2 = await response.json()
              await Promise.all(res2.items.map(async item1 => {
                if (item1.sk !== 'path') {
                  if (item1.target_element === item1.id + '-tree') {
                    console.log('err1')
                    item1.target_element = newId + '-tree'
                  }
                  return fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2', {
                    method: 'POST',
                    headers: {
                      'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(
                      {
                        ...item1,
                        id: newId
                      }
                    ),
                  })
                }
                else {
                  await fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2', {
                    method: 'POST',
                    headers: {
                      'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(
                      {
                        ...item1,
                        lsi1: item1.lsi1.replace(path, new_value),
                        id: newId,
                        protected: false
                      }
                    ),
                  })
                }
              }))
            }))





            loadUsingPath()
            cloned.remove();
          };

          cloned.style.display = 'block';
          fieldset.insertAdjacentElement('afterend', cloned);
        }
      }
      const edit = (id, path) => {
        const editArea = document.querySelector('[data-element="create-new-file-path"]');
        const fieldset = document.getElementById(id);

        if (editArea && fieldset) {
          console.log('editing')
          const cloned = editArea.cloneNode(true);
          const saveButton = cloned.querySelector('[data-action="create-new-file-path-save"]');
          const cancelButton = cloned.querySelector('[data-action="create-new-file-path-cancel"]');
          cancelButton.onclick = (e) => {
            e.stopPropagation()
            e.target.parentNode.parentNode.remove()
          }
          const input = cloned.querySelector('[data-input="create-new-file-path-input"]');
          const name = fieldset.querySelector('[data-value="file-path"]').textContent;

          input.value = path;
          input.onclick = (event) => {
            event.stopPropagation()
          }
          saveButton.onclick = async function (e) {
            e.stopPropagation()
            const new_value = cloned.querySelector('[data-input="create-new-file-path-input"]').value
            const response = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?ownerUUID=path&gsi1lsi1=true&lsi1=${path}`);
            //list of sub paths
            const data = await response.json();

            for (const item of data.items) {
              await fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify(
                  {
                    ...item,
                    lsi1: item.lsi1.replace(path, new_value)
                  }
                ),
              })
            }

            loadUsingPath()
            cloned.remove();
          };

          cloned.style.display = 'block';
          fieldset.insertAdjacentElement('afterend', cloned);
        }
      };
      addMenuEntry(menu, 'âœï¸ Edit', (e) => edit(id, path))
      addMenuEntry(menu, 'ğŸ—‘ï¸ Delete', (e) => openRemove1(id, path))
      addMenuEntry(menu, 'â§‰ Copy', (e) => copy(id, path))

      addMenuEntry(menu, 'âœ… Enable Protection', (e) => setProtected(id, path, true))
      addMenuEntry(menu, 'âŒ Disable Protection', (e) => setProtected(id, path, false))

     

      const setProtected = async (id, path, protected) => {
        const response1 = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?ownerUUID=path&gsi1lsi1=true&lsi1=${path}`);
        //list of sub paths
        const data = await response1.json();
        await Promise.all(data.items.map(item =>
          fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ ...item, protected }),
          })
        ))
        alert('protection set')

      }
      // Adjust the position relative to the viewport
      const offsetX = e.pageX;
      const offsetY = e.pageY;

      menu.style.display = 'block';
      menu.style.left = `${offsetX}px`;
      menu.style.top = `${offsetY}px`;

      // Hide the menu when clicking the left mouse button
      window.addEventListener('click', function () {
        menu.style.display = 'none';
      });

    }
    async function loader(e, handler) {
      const loadingScreen = document.getElementById('loading');
      loadingScreen.style.display = 'flex';

      const timerElement = document.getElementById('last-action-time');
      let tenthsOfSeconds = 0;
      const interval = setInterval(function () {
        tenthsOfSeconds++;
        timerElement.textContent = (tenthsOfSeconds / 10).toFixed(1);
      }, 100);

      await handler(e);

      loadingScreen.style.display = 'none';
      clearInterval(interval);
      console.log(timerElement.textContent)
      console.log(tenthsOfSeconds)
      const lastActionTime = document.getElementById('timer');
      lastActionTime.textContent = timerElement.textContent;
    }
    const cancel = (event) => {
      event.stopPropagation()
      console.log("cancelling")
      event.target.parentNode.parentNode.setAttribute('hidden', "")
    }
    const openRemove = (event) => {
      var fieldset = event.currentTarget.closest('li');

      // Get the file ID element within the fieldset
      var fileIdElement = fieldset.querySelector('[data-element="file-id"]');

      // Log the file ID
      console.log('File ID:', fileIdElement.lastElementChild.textContent);

      // Toggle the visibility of the file ID element
      fileIdElement.hidden = false;

      // Toggle the visibility of the "cancelation" fieldset
      var cancelationFieldset = fieldset.querySelector('#cancelation');
      cancelationFieldset.hidden = !cancelationFieldset.hidden;

    }
    function showId(event) {
      // Get the parent fieldset of the clicked button
      var fieldset = event.currentTarget.closest('li');

      // Get the file ID element within the fieldset
      var fileIdElement = fieldset.querySelector('[data-element="file-id"]');

      // Toggle the visibility of the file ID element
      fileIdElement.hidden = !fileIdElement.hidden;
    }
    const openTypeSelect = () => {
      var fieldset = document.querySelector('[data-element="choose-new-file-type"]');
      fieldset.removeAttribute('hidden');
    }
    function createNew() {

      var fieldset2 = document.querySelector('[data-element="create-new-file-path"]');
      fieldset2.removeAttribute('hidden');
    }
    function savePath() {
      var fieldset2 = document.querySelector('[data-element="create-new-file-path"]');
      fieldset2.setAttribute('hidden', '');

      // Access the type from the choose-new-file-type fieldset
      // var type = document.querySelector('[data-element="choose-new-file-type"]').getAttribute('type');

      // Get the path from the input element
      var pathInput = document.querySelector('[data-input="create-new-file-path-input"]');
      var path = pathInput.value;
      pathInput.value = ''

      // Create a new path based on the type
      var newPath = path;

      // Perform additional actions based on the selected type and path
      console.log('at path:', newPath);

      // Fetch POST request
      fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          sk: 'path',
          lsi1: newPath,
          ownerUUID: 'path'
        }),
      })
        .then(response => response.json())
        .then(data => console.log('API Response:', data))
        .then(e => { path ? loadUsingPath() : loadFileList() })
        .catch(error => console.error('Error:', error));
    }
    let path = ''
    let lvls = []
    const removeDirectory = async (event, id, path) => {
      event.preventDefault();

      // Get the closest list item (li) element
      var listItem = document.getElementById(id);

      try {
        const response = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?ownerUUID=path&gsi1lsi1=true&lsi1=${path}`);
        //list of sub paths
        const data = await response.json();

        const all = await Promise.all(data.items.map(async item => {

          const { id, sk, } = item;
          const response = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?id=${id}&startsWith=true`).then(e => e.json())
          let { sku, protected } = response.items.find(e => e.sk === sk)
          if (protected) {
            console.log('protected el ' + id)
            return true
          }

          if (sku) {
            const skuResponse = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?id=${sku}&sk=qty;&startsWith=true`);
            const skuData = await skuResponse.json();

            for (const skuItem of skuData.items) {
              await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2/${skuItem.id}:${skuItem.sk}`, {
                method: 'DELETE',
                headers: {
                  'Content-Type': 'application/json',
                  // Add any additional headers if needed
                },
              });
            }
          }


          await Promise.all(response.items.map(item =>
            fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2/${item.id}:${item.sk}`, {
              method: 'DELETE',
              headers: {
                'Content-Type': 'application/json',
                // Add any additional headers if needed
              },
            })


          ))
          return false

        }))

        event.target.parentNode.parentNode.remove()
        if (all.every(el => el)) {
          alert('all protected')
          return
        } else if (all.some(e => e)) {
          alert('partial delete')
          return
        }

        listItem.remove();
      } catch (error) {
        console.error('Error:', error);
      }
    };
    const remove = async (event, id) => {
      event.preventDefault();

      // Get the closest list item (li) element
      var listItem = document.getElementById(id);


      try {
        const response = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?id=${id}&startsWith=true`);
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        const data = await response.json();

        if (data.items.find(e => e.protected)) {
          alert('protected component');
          return;
        }

        // Step 2: Iterate through the items and send a DELETE request for each
        for (const item of data.items) {
          const { id, sk, sku } = item;

          if (sku) {
            const skuResponse = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?id=${sku}&sk=qty;&startsWith=true`);
            if (!skuResponse.ok) {
              throw new Error(`HTTP error! Status: ${skuResponse.status}`);
            }
            const skuData = await skuResponse.json();

            for (const skuItem of skuData.items) {
              await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2/${skuItem.id}:${skuItem.sk}`, {
                method: 'DELETE',
                headers: {
                  'Content-Type': 'application/json',
                  // Add any additional headers if needed
                },
              });
            }
          }

          const deleteResponse = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2/${id}:${sk}`, {
            method: 'DELETE',
            headers: {
              'Content-Type': 'application/json',
              // Add any additional headers if needed
            },
          });

          if (!deleteResponse.ok) {
            throw new Error(`HTTP error! Status: ${deleteResponse.status}`);
          }
          console.log(`Successfully deleted item with id:${id} and sk:${sk}`);
        }
      } catch (error) {
        console.error('Error:', error);
      }


      event.target.parentNode.parentNode.remove()
      listItem.remove();
    }
    function removeDuplicates(arr) {
      return Array.from(new Set(arr));
    }
    function loadFileList() {
      // Fetch GET request

      fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?ownerUUID=path&gsi1lsi1=true')
        .then(response => response.json())
        .then(data => {
          // Replace existing file paths with dynamic content
          var filePathList = document.getElementById('filePathList');
          filePathList.innerHTML = '';
          let i = 0;
          let folders = []
          const elements = []
          console.log(JSON.stringify(data))
          const items = data.items.filter(i => i.lsi1).map(item1 => { return { ...item1, name: item1.lsi1.replace(path, '').split(';')[0] } })
          console.log(JSON.stringify(items))
          for (const item of items) {
            const splited = item.name.split(';')[0].split('/')
            if (splited.length > 1) {
              folders.push(splited[0])
            }
            else {
              elements.push({ name: splited[0], ...item })
            }
          }
          folders = removeDuplicates(folders)
          console.log(JSON.stringify(elements))
          folders.forEach(item => {


            if (i < 1000) {
              i++
              // Clone the fieldset
              var clonedItem = document.getElementById('item').cloneNode(true);

              // Set unique ID for the cloned item
              clonedItem.id = item;

              // Set file path and emoji
              const file_path = clonedItem.querySelector('[data-value="file-path"]')
              file_path.textContent = item;
              clonedItem.onclick = setPath
              let icon = 'ğŸ“‚';

              clonedItem.querySelector('[data-value="file-emoji"]').textContent = icon;

              // Set file ID

              // Set up onclick for file-open button
              function setPath() {
                path = item + '/'
                localStorage.setItem('storedPath', path)
                console.log(path)
                const labelElement = document.querySelector('.l-2');

                // Update the text content of the label
                labelElement.textContent = `${path}`;
                openPath();
              };
              clonedItem.addEventListener('contextmenu', (e) => addDirectoryMenu(e, item + '/', item))

              // Append the cloned item to the filePathList
              filePathList.appendChild(clonedItem);
            }

          });
          elements && elements.forEach(async el1 => {
            const item = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2/${el1.id}:${el1.sk}`, {
              method: 'GET',
              headers: {
                'Content-Type': 'application/json',
              },
            }).then(el => el.json()).then(el2 => { return { ...el2, ...el1 } })

            if (i < 1000) {
              i++
              // Clone the fieldset
              var clonedItem = document.getElementById('item').cloneNode(true);

              // Set unique ID for the cloned item
              clonedItem.id = item.id;

              // Set file path and emoji
              const item_path = clonedItem.querySelector('[data-value="file-path"]')
              item_path.textContent = item.name;
              clonedItem.onclick = function (event) {
                event.stopPropagation()
                redirect(item.id);
              };
              clonedItem.addEventListener('contextmenu', (e) => addMenu(e, item.id, item.protected))
              let icon = 'ğŸ§©';
              if (item.lsi1.startsWith('css')) {
                icon = 'ğŸ¨';
              } else if (item.lsi1.startsWith('javascript')) {
                icon = 'ğŸ’»';
              }
              clonedItem.querySelector('[data-value="file-emoji"]').textContent = icon;



              // Set up onclick for file-open button


              // Append the cloned item to the filePathList
              filePathList.appendChild(clonedItem);
            }

          });



          // Show the cloned fieldsets
          document.querySelectorAll('#filePathList fieldset').forEach(fieldset => {
            fieldset.id !== 'cancelation' && fieldset.removeAttribute('hidden');
          });



          // Update select options
          var pathSelector = document.getElementById('pathSelector');
          pathSelector.innerHTML = '<option value="select">â¬‡ï¸ select</option><option value="back">â¬…ï¸ back</option>';
          lvls.forEach((lvl, index) => {
            pathSelector.innerHTML += `<option value="${lvl}">â¡ï¸ ${lvl}</option>`;
          });
        })
        .catch(error => console.error('Error:', error));

    }
    const openPath = () => {
      loadUsingPath()
    }
    const redirect = (id) => {
      console.log(id)
      const redirectURL = `index.html?id=${id}`;

      // Redirect to the new URL
      window.location.href = redirectURL;
    }
    function handlePathSelection() {
      // Get the selected value from the pathSelector
      var selectedValue = document.getElementById('pathSelector').value;

      // Get the corresponding item based on the selected value
      var selectedItem = selectedValue

      // Handle the selected item as needed
      console.log('Selected Item:', selectedItem);
      if (selectedItem === 'select' || selectedItem === undefined) {
        return
      }
      if (selectedItem === 'back') {
        if (path === '') {
          return
        }
        const splited = path.split('/')
        if (splited.length === 1) {
          loadFileList()
          return
        }
        splited.pop()
        path = splited.join('/')
        loadUsingPath()
        return
      }
      if (path === '') {
        path = selectedItem
      }
      else {
        path = path + '/' + selectedItem

      }
      console.log(path)
      loadUsingPath()

    }
    function loadRoot() {

      path = ''
      localStorage.setItem('storedPath', path)
      const labelElement = document.querySelector('.l-2');

      // Update the text content of the label
      labelElement.textContent = `${path}`;
      loadFileList();
    }
    function labelClick(event) {
      // Extract the clicked part of the text based on the click position
      const clickedText = getClickedText(event, event.target.textContent);

      const p = clickedText
      path = p + '/'
      localStorage.setItem('storedPath', path)
      console.log(path)
      const labelElement = document.querySelector('.l-2');

      // Update the text content of the label
      labelElement.textContent = `${path}`;
      openPath();

      // Do something with the extracted text (for example, log it)
      console.log(clickedText);
    }

    function getClickedText(event, labelText) {
      const clickX = event.clientX;
      const labelRect = event.target.getBoundingClientRect();
      const relativeClickX = clickX - labelRect.left;

      // Split the label text into parts based on the '/' separator
      const parts = labelText.split('/');

      // Find the part that corresponds to the clicked position
      let accumulatedWidth = 0;
      for (const part of parts) {
        const partWidth = getTextWidth(part, event.target);
        accumulatedWidth += partWidth;
        if (accumulatedWidth >= relativeClickX) {
          const parts1 = parts.slice(0, parts.indexOf(part) + 1)
          return parts1.join('/')
        }
      }

      // Default: return the entire label text
      return labelText;
    }

    function getTextWidth(text, element) {
      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');
      const computedStyle = window.getComputedStyle(element);
      context.font = computedStyle.font;

      // Measure the width of the text
      const width = context.measureText(text).width;

      // Cleanup
      canvas.remove();

      return width;
    }
    const loadUsingPath = () => {
      return fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?ownerUUID=path&gsi1lsi1=true&lsi1=' + path)
        .then(response => response.json())
        .then(data => {
          // Replace existing file paths with dynamic content
          var filePathList = document.getElementById('filePathList');
          filePathList.innerHTML = '';
          lvls = []
          let i = 0
          let folders = []
          const elements = []
          console.log(JSON.stringify(data))
          const items = data.items.filter(i => i.lsi1).map(item1 => { return { ...item1, name: item1.lsi1.replace(path, '').split(';')[0] } })
          console.log(JSON.stringify(items))
          for (const item of items) {
            const splited = item.name.split(';')[0].split('/')
            if (splited.length > 1) {
              folders.push(splited[0])
            }
            else {
              elements.push({ name: splited[0], ...item })
            }
          }
          folders = removeDuplicates(folders)
          console.log(JSON.stringify(folders))
          console.log(JSON.stringify(elements))

          folders.forEach(item => {


            if (i < 1000) {
              i++
              // Clone the fieldset
              var clonedItem = document.getElementById('item').cloneNode(true);

              // Set unique ID for the cloned item
              clonedItem.id = item;

              // Set file path and emoji
              const file_path = clonedItem.querySelector('[data-value="file-path"]')
              file_path.textContent = item;
              clonedItem.onclick = setPath
              let icon = 'ğŸ“‚';

              clonedItem.querySelector('[data-value="file-emoji"]').textContent = icon;

              // Set file ID


              // Set up onclick for file-open button
              function setPath() {
                path = path + item + '/'
                localStorage.setItem('storedPath', path)
                console.log(path)
                const labelElement = document.querySelector('.l-2');

                // Update the text content of the label
                labelElement.textContent = `${path}`;
                openPath();
              };
              clonedItem.addEventListener('contextmenu', (e) => addDirectoryMenu(e, path + item + '/', item))

              // Append the cloned item to the filePathList
              filePathList.appendChild(clonedItem);
            }

          });
          elements && elements.forEach(async el1 => {

            const item = await fetch(`https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2/${el1.id}:${el1.sk}`, {
              method: 'GET',
              headers: {
                'Content-Type': 'application/json',
              },
            }).then(el => el.json()).then(el2 => { return { ...el2, ...el1 } })
            if (i < 1000) {
              i++
              // Clone the fieldset
              var clonedItem = document.getElementById('item').cloneNode(true);

              // Set unique ID for the cloned item
              clonedItem.id = item.id;

              // Set file path and emoji
              const item_path = clonedItem.querySelector('[data-value="file-path"]')
              item_path.textContent = item.name;
              clonedItem.addEventListener('contextmenu', (e) => addMenu(e, item.id, item.protected))
              clonedItem.onclick = function (event) {
                redirect(item.id);
              };
              let icon = 'ğŸ§©';
              if (item.lsi1.startsWith('css')) {
                icon = 'ğŸ¨';
              } else if (item.lsi1.startsWith('javascript')) {
                icon = 'ğŸ’»';
              }
              clonedItem.querySelector('[data-value="file-emoji"]').textContent = icon;




              // Append the cloned item to the filePathList
              filePathList.appendChild(clonedItem);
            }

          });



        })
        .catch(error => console.error('Error:', error));
    }
    document.addEventListener('DOMContentLoaded', async function () {
      const loadingScreen = document.getElementById('loading');
      loadingScreen.style.display = 'flex';
      const timerElement = document.getElementById('timer');
      let tenthsOfSeconds = 0;
      const interval = setInterval(function () {
        tenthsOfSeconds++;
        timerElement.textContent = (tenthsOfSeconds / 10).toFixed(1);
      }, 100);
      const storedPath = localStorage.getItem('storedPath')
      if (storedPath) {
        path = storedPath
        const labelElement = document.querySelector('.l-2');

        // Update the text content of the label
        labelElement.textContent = `${path}`;
        loadUsingPath()
      }
      else {
        loadFileList()
      }
      clearInterval(interval);
      console.log(timerElement.textContent)
      const lastActionTime = document.getElementById('last-action-time');
      lastActionTime.textContent = timerElement.textContent;
      loadingScreen.style.display = 'none';
    })
  </script>
  </script>

  <script>
    function adjustWidthToContent(input) {
      const minWidth = 150; // Minimum width of the input in pixels
      const charWidth = 10; // Average width per character in pixels, adjust as needed for your font

      // Calculate the new width based on the length of the input's value or the minimum width, whichever is greater
      const newWidth = Math.max(input.value.length * charWidth, minWidth);

      // Apply the new width to the input
      input.style.width = `${newWidth}px`;
    }
  </script>



  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸
      function toggleButton(button) {
        // ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ Ñ‚ĞµĞºÑÑ‚ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸
        button.textContent = button.textContent.includes('â˜‘ï¸') ? 'â˜' : 'â˜‘ï¸';
      }

      // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ mouseenter Ğ´Ğ»Ñ file-entry
      document.querySelectorAll('li[data-element="file-path"]').forEach(entry => {
        entry.addEventListener('mouseenter', () => {
          const button = entry.querySelector('.file-entry-selector');
          if (button) {
            toggleButton(button);
          }
        });
      });
    });
  </script>





  <div style="display: none;" id="R-click-file-type-x" class="right-click-menu">
    <div class="menu-option" onclick="fileTypeChoose('component')">â„¹ï¸ Info</div>

    <div class="menu-option" onclick="fileTypeChoose('page')">ğŸ”² Multi select</div>

    <div class="menu-option" onclick="fileTypeChoose('component')">ğŸ—‘ï¸ Remove</div>


    <div class="menu-option" onclick="fileTypeChoose('page')">âœ… Robots Disallow ğŸ“µ</div>
    <div class="menu-option" onclick="fileTypeChoose('page')">ğŸš« Robots Disallow ğŸ“µ</div>

    <div class="menu-option" onclick="fileTypeChoose('page')">âœ… Publish ğŸ“°</div>
    <div class="menu-option" onclick="fileTypeChoose('component')">ğŸš« Publish ğŸ“°</div>
    <div class="menu-option" onclick="fileTypeChoose('page')">âœ… Sitemap ğŸ“‹ </div>
    <div class="menu-option" onclick="fileTypeChoose('component')">ğŸš« Sitemap ğŸ“‹ </div>

  </div>
  <div style="display: none;" id="R-click-file-type" class="right-click-menu">
    <div class="menu-option" onclick="fileTypeChoose('page')">ğŸŒ Page</div>
    <div class="menu-option" onclick="fileTypeChoose('component')">ğŸ§© HTML</div>
    <div class="menu-option" onclick="fileTypeChoose('css')">ğŸ¨ CSS</div>
    <div class="menu-option" onclick="fileTypeChoose('js')">ğŸ’» JS</div>
  </div>



  <script>
    // Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¸ ÑÑ‚Ğ¸Ğ»ĞµĞ¹ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº
    function updateButtons(selectedType) {
      const allButtonsIds = ['btn-all', 'btn-page', 'btn-component', 'btn-css', 'btn-js'];

      allButtonsIds.forEach(btnId => {
        const btn = document.getElementById(btnId);
        if (btnId === `btn-${selectedType}`) {
          // ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½ÑƒÑ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ĞºĞ»Ğ°ÑÑ b-selected
          btn.hidden = false;
          btn.classList.add('b-selected');
        } else {
          // Ğ¡ĞºÑ€Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ²ÑĞµ Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ¸ ÑƒĞ´Ğ°Ğ»ÑĞµĞ¼ ĞºĞ»Ğ°ÑÑ b-selected
          btn.hidden = true;
          btn.classList.remove('b-selected');
        }
      });

      // Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ´Ğ»Ñ "hide" Ğ¾Ğ¿Ñ†Ğ¸Ğ¸
      if (selectedType === 'hide') {
        const btnAll = document.getElementById('btn-all');
        btnAll.hidden = false; // ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ btn-all
        btnAll.classList.remove('b-selected'); // Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ ĞºĞ»Ğ°ÑÑ b-selected, ĞµÑĞ»Ğ¸ Ğ¾Ğ½ ĞµÑÑ‚ÑŒ
      }
    }

    // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ»ĞµĞ²Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ¸ĞºĞ° Ğ¿Ğ¾ ĞºĞ½Ğ¾Ğ¿ĞºĞµ
    function handleLeftClickOnButton(clickedButtonId) {
      const allButtonsIds = ['btn-page', 'btn-component', 'btn-css', 'btn-js'];

      if (clickedButtonId === 'btn-all') {
        // ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ ĞºĞ»Ğ°ÑÑ b-selected Ğ´Ğ»Ñ btn-all
        document.getElementById(clickedButtonId).classList.toggle('b-selected');
      } else {
        // Ğ¡ĞºÑ€Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ²ÑĞµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸, ĞºÑ€Ğ¾Ğ¼Ğµ btn-all, Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ btn-all ĞºĞ»Ğ°ÑÑ b-selected
        allButtonsIds.forEach(btnId => {
          document.getElementById(btnId).hidden = true;
        });
        const btnAll = document.getElementById('btn-all');
        btnAll.hidden = false;
        btnAll.classList.add('b-selected');
      }
    }

    const allButtonsIds1 = ['btn-all', 'btn-page', 'btn-component', 'btn-css', 'btn-js'];

    allButtonsIds1.forEach(btnId => {
      const button = document.getElementById(btnId);
      button.addEventListener('click', function (e) {
        handleLeftClickOnButton(e.target.id);
      });
    });

    // Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ
    const menu = document.querySelector('#R-click-file-type');
    document.addEventListener('contextmenu', function (e) {
      if (e.target.id.startsWith('btn-')) {
        e.preventDefault();
        menu.style.display = 'block';
        menu.style.left = `${e.pageX}px`;
        menu.style.top = `${e.pageY}px`;
      }
    });

    // Ğ¡ĞºÑ€Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¼ĞµĞ½Ñ Ğ¿Ñ€Ğ¸ ĞºĞ»Ğ¸ĞºĞµ
    window.addEventListener('click', function () {
      menu.style.display = 'none';
    });

    // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ¸Ğ· ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ
    function fileTypeChoose(selectedType) {
      updateButtons(selectedType);
    }
  </script>
  <script>document.addEventListener('DOMContentLoaded', function () {
      var filtersOpenButton = document.getElementById('filters-open');
      var mainContent = document.getElementById('main-content');
      var leftSidePanel = document.querySelector('.left-side-panel');
      var buttonsToShowOrHide = ['publish', 'sitemap', 'robots', 'dates', 'btn-all']; // ID ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ´Ğ»Ñ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°/ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ñ

      filtersOpenButton.addEventListener('click', function () {
        // ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ ĞºĞ»Ğ°ÑÑ b-selected
        filtersOpenButton.classList.toggle('b-selected');

        // ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ ÑˆĞ¸Ñ€Ğ¸Ğ½Ñƒ left-side-panel
        var currentWidth = leftSidePanel.style.width;
        leftSidePanel.style.width = currentWidth === '300px' ? '65px' : '300px';

        // ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ margin-left Ğ´Ğ»Ñ main-content
        var currentMargin = mainContent.style.marginLeft;
        mainContent.style.marginLeft = currentMargin === '315px' ? '80px' : '315px';

        // ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº
        buttonsToShowOrHide.forEach(function (buttonId) {
          var button = document.getElementById(buttonId);
          if (button) {
            button.hidden = !button.hidden;
          }
        });
      });
    });
  </script>


</body>