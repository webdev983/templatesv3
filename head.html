<head>
  <link rel="stylesheet" href="css/right-click-menu.css" media="all">
  <link rel="stylesheet" href="css/buttons-and-menus.css" media="all">
  <link rel="stylesheet" href="css/panels.css" media="all">

</head>


<body class="body">
  <aside class="aside">

    <div class="panel top">
      <button disabled class="b-1" id="last-action-time"
        style="color: black;z-index:1; position: absolute;top: 50%;left: 50%; transform: translate(-50%, -50%);">0.0</button>
    </div>

    <div class="panel left" style="margin-top: 10px;">
      <div id="nav-buttons">
        <a href="https://webdev983.github.io/templatesv3/head"><button class="b-1 b-selected">🧠</button></a>
        <a href="https://webdev983.github.io/templatesv3/files"><button class="b-1">📂</button></a>
    </div>
  
    <div class="helper-aside" style="margin-top: 30px;">
      <button class="b-1">➕</button>
    </div>

  <div class="panel bottom">
    <button class="b-1">📴</button>
  </div>


    </aside>
    <main class="main">

      <div style="margin: 10px;">


          
            <button class="b-4" style="margin-right: 5px;"><label class="l-1">👶</label>
              <label class="l-2">Helpers</label></button> 

              <a href="https://webdev983.github.io/templatesv3/sites">
                <button class="b-4" style="margin-right: 5px;" id="sites-button"><label class="l-1">🌐</label>
                  <label class="l-2">Sites</label></button>  
              </a>
        </div>





<section data-variation data-section="helpers">
  <div hidden data-menu style="margin-bottom: 30px;">
      <br>
      <span class="l-1" style="user-select: none;">👤</span>
      <input placeholder="Username"  class="l-2" style="width: 400px; font-size: 18px; padding: 5px;" type="text" id="username" name="username">
      <br>
      <span class="l-1"   style="user-select: none;">🔑</span>
      <input placeholder="Password" class="l-3" class="l-2"  style="width: 400px; font-size: 18px; padding: 5px;" type="text" id="password" name="password">
    <br>
    <div style="margin-left: 30px;">
      <label class="l-3"><input type="checkbox">📂 Files</label>
      <label class="l-3"><input type="checkbox">🛍️ Shopping</label>
      </div>

    <button  id="login" class="b-3" style="width: 400px; margin-left: 35px;  margin-top: 10px; background: rgb(235, 234, 234); border-color: rgb(184, 182, 182);">➡️ Save</button>
  </div>

  <ol class="list-1" id="helpers_list">
    <li  id="helper_name" style="cursor: pointer;"><label class="l-3"
      style="user-select: none; margin-right: 5px;">👤</label><label class="l-2"
      id="site-name-value">helper1</label></li>
  </ol>
</section>


</main>
<script>
  const openSite =(event)=>{
    const site = event.target.textContent
    window.location.href = './site-settings.html?site='+site;
    console.log(site)
  }
  const loadSites = async () => {
    const res = await fetch('https://5jfh1fonoh.execute-api.us-east-1.amazonaws.com/prod/templatesv2?ownerUUID=path&gsi1lsi1=true')
    const response = await res.json()
    console.log('res'+ JSON.stringify(response))
    const paths = response.items.map(item => item.lsi1.split('/')[0])
    const sites = []
    for (const path of paths) {
      if (!sites.includes(path)) {
        sites.push(path)
      }
    }
    console.log(sites)
    // Get the parent element (sites-list)
    const sitesList = document.getElementById('sites-list');

    // Clone the template node
    const templateNode = document.getElementById('site-name');

    // Clear the existing content inside sites-list
    sitesList.innerHTML = '';

    // Iterate through the array and create list items
    sites.forEach(site => {
      // Clone the template node
      const clonedNode = templateNode.cloneNode(true);

      // Update the content of the cloned node with the current site
      clonedNode.querySelector('#site-name-value').textContent = site;

      // Append the cloned node to sites-list
      sitesList.appendChild(clonedNode);

      // Show the cloned node (remove the 'hidden' attribute)
      clonedNode.removeAttribute('hidden');
    });

  }
  document.addEventListener('DOMContentLoaded',loadSites);
</script>